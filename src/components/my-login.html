<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../my-redux.html">

<dom-module id="my-login">
<template>
    <style include="shared-styles">
    :host {
        display: block;
    }
    .overlay{
        will-change: transform, opacity;
        background-color: var(--modal-overlay-color);
        position: absolute;
        top: 0px;
        right: 0px;
        left: 0px;
        bottom: 0px;
        z-index: 999;
        opacity: 0;
        animation: fadein 0.3s;
        transition-timing-function: ease-out;
        animation-fill-mode: forwards;
        @apply(--layout-horizontal);
        @apply(--layout-center); 
    }
    .overlay-out{
        animation: fadeout 0.3s;
        transition-timing-function: ease-in;
        animation-fill-mode: forwards;
    }
    .outer-container{
        position: absolute;
        top: 0px;
        right: 0px;
        left: 0px;
        bottom: 0px;
        z-index: 1000;
        opacity: 1;
        cursor: pointer;
        @apply(--layout-horizontal);
        @apply(--layout-center); 
    }
    .container{
        padding: 20px 45px;
        position: relative;
        width: var(--modal-width);
        height: auto;
        background-color: var(--modal-bacground-color);
        z-index: 1001;
        opacity: 1;
        animation: fadeup 0.4s;
        transition-timing-function: ease-out;
        animation-fill-mode: forwards;
        margin: auto;
        border-radius: var(--modal-border-radius);
        cursor: default;
        -webkit-box-shadow: -1px 6px 21px 0px rgba(0,0,0,0.15);
        -moz-box-shadow: -1px 6px 21px 0px rgba(0,0,0,0.15);
        box-shadow: -1px 6px 21px 0px rgba(0,0,0,0.15);
    }
    .container-out{
        animation: fadedown 0.4s;
        transition-timing-function: ease-in;
        animation-fill-mode: forwards;
    }
    .save{
        margin-top: 25px;
        margin-bottom: 25px;
    }
    .provider{
        margin-bottom: 5px;
        color: white;
        border: 1px solid #334d7a;
        background: #5375b1; 
        background: -moz-linear-gradient(top, #5375b1 0%, #446295 100%); 
        background: -webkit-linear-gradient(top, #5375b1 0%,#446295 100%); 
        background: linear-gradient(to bottom, #5375b1 0%,#446295 100%); 
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5375b1', endColorstr='#446295',GradientType=0 ); 
    }
    .twitter{
        border: 1px soid #3b88c3;
        background: #55acee; 
        background: -moz-linear-gradient(top,  #55acee 0%, #51a3e2 100%); 
        background: -webkit-linear-gradient(top,  #55acee 0%,#51a3e2 100%); 
        background: linear-gradient(to bottom,  #55acee 0%,#51a3e2 100%); 
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#55acee', endColorstr='#51a3e2',GradientType=0 ); 
    }

    small{
        @apply(--small-text);
    }
    @keyframes fadein {
        from { opacity: 0; }
        to  { opacity: 0.6; }
    }
    @keyframes fadeup {
        from { 
            opacity: 0;
            transform: translate(0px, 30px);
            }
        to  { 
            opacity: 1;
            transform: translate(0px, 0px);
            }
    }
    @keyframes fadeout {
        from { opacity: 1; }
        to  { opacity: 0; }
    }
    @keyframes fadedown {
        from { 
            opacity: 1;
            transform: translate(0px, 0px);
            }
        to  { 
            opacity: 0;
            transform: translate(0px, 30px);
            }
    }
    </style>

    <div class="outer-container" on-tap="_close">
        <div class="container" onclick="event.stopPropagation()" id="container">
            <h2>{{localize('login')}}</h2>
            <paper-button class="provider">Log in with Facebook</paper-button>
            <paper-button class="provider twitter">Log in with Twitter</paper-button>
            <paper-input label="Email"></paper-input>
            <paper-input label="Password"></paper-input>
            <paper-button class="save">Log In</paper-button>
        </div>
    </div>
    <div class="overlay" id="overlay"></div>

</template>

<script>
    class MyLogin extends ReduxMixin(Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior], Polymer.Element)) {

    connectedCallback() {
        super.connectedCallback();
        this.loadResources(this.resolveUrl("../my-locales.json"));
    }

    static get is() { 
        return 'my-login'; 
    }

    static get actions() {
        return Object.assign({
            SHOW_LOGIN: function(showLogin){
                return { type: 'SHOW_LOGIN', showLogin: showLogin}
            }
        });
    }

    static get properties() {
        return {
            mobile:{
                type: Boolean,
                statePath: 'mobile',
            },
            drawer: {
                type: Boolean,
                statePath: 'drawer',
            },
            loggedIn: {
                type: Boolean,
                statePath: 'loggedIn',
            },
            setLanguage: {
                type: String,
                statePath: 'language',
                observer: '_language'
            }
        };
    }
        _language(){
            this.language = this.setLanguage;
        }
        _close(){
            this.toggleClass('container-out', true, this.$.container);
            this.toggleClass('overlay-out', true, this.$.overlay);
            setTimeout(function(){ 
                this.toggleClass('container-out', false, this.$.container);
                this.toggleClass('overlay-out', false, this.$.overlay);
                this.dispatch('SHOW_LOGIN', false);
            }.bind(this), 300);  
        }
    }
    window.customElements.define(MyLogin.is, MyLogin);
</script>
</dom-module>
